dist: trusty
sudo: required

language: rust

before_install:
  - \[ "${TARGET}" = "asmjs-unknown-emscripten" ]
    && sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
    && sudo apt-get install libstdc++6
    && sudo apt-get update -q
    && sudo apt-get upgrade
    && sudo apt-get dist-upgrade
    && wget https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz
    && tar -xzvf emsdk-portable.tar.gz
    && ./emsdk-portable/emsdk update
    && ./emsdk-portable/emsdk install sdk-tag-1.37.16-64bit
    && ./emsdk-portable/emsdk activate sdk-tag-1.37.16-64bit
    && source ./emsdk-portable/emsdk_env.sh
    && emcc -v

script:
  - cargo build --target $TARGET

env:
  - TARGET=asmjs-unknown-emscripten
